<!DOCTYPE html>
<html>    
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width initial-scale=1">

    <title>php与系统性能优化总结</title>
    <meta name="description"
          content="">
    <link rel="shortcut icon" href="/images/favicon.ico">
    
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://chchmlml.github.io/php/2017/08/14/optimization-performance-with-php.html">
    <link rel="alternate" type="application/atom+xml" title="haicheng的博客" href="https://chchmlml.github.io/feed.xml" />
    <script src="/scripts/jquery-1.11.2.min.js"></script>
    <script src="/scripts/pithy.js"></script>
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>


  <body>
    <header class="header">
    <div class="header-container">
        <div class="nav">
            
            <li>
                <a href="/index.html">首页</a>
            </li>
            
            
            <li>
                <a href="/archive.html">归档</a>
            </li>
            
            
            <li>
                <a href="/category.html">分类</a>
            </li>
            
            
            <li>
                <a href="/about.html">about</a>
            </li>
            
        </div>
        <div class="description"> 博观而约取，厚积而薄发。</div>
        <ul class="social-links">
            <li>
                <a href="https://weibo.com/chchmlml" title="Weibo" target="_blank">
                    <img width="19px" height="19px" src="/images/weibo.png"/>
                </a>
            </li>
            <li>
                <a href="https://github.com/chchmlml" title="Github" target="_blank">
                    <img width="19px" height="19px" src="/images/github.png"/>
                </a>
            </li>
            <li>
            <a href="https://twitter.com/chchmlml" title="Twitter" target="_blank">
                <img width="19px" height="19px" src="/images/twitter.png"/>
            </a>
            </li>
            <li>
                <a href="/feed.xml" title="RSS" target="_blank">
                    <img width="19px" height="19px" src="/images/rss.png"/>
                </a>
            </li>
        </ul>
    </div>
</header>

    <br>
    <div class="page-content">
      <div class="wrapper">
        <div class="post">
  <br>
  <header class="post-header">
    <h1 class="post-title">php与系统性能优化总结</h1>
    <p class="post-meta">Aug 14, 2017 • haicheng</p>
  </header>

  <article class="post-content">
    <ul id="markdown-toc">
  <li><a href="#原则" id="markdown-toc-原则">原则</a></li>
  <li><a href="#前端优化" id="markdown-toc-前端优化">前端优化</a>    <ul>
      <li><a href="#减少http请求" id="markdown-toc-减少http请求">减少http请求</a></li>
      <li><a href="#浏览器缓存" id="markdown-toc-浏览器缓存">浏览器缓存</a></li>
      <li><a href="#cdn分布式存储前端资源" id="markdown-toc-cdn分布式存储前端资源">CDN分布式存储前端资源</a></li>
      <li><a href="#多域名访问" id="markdown-toc-多域名访问">多域名访问</a></li>
      <li><a href="#数据压缩" id="markdown-toc-数据压缩">数据压缩</a></li>
      <li><a href="#首页优化" id="markdown-toc-首页优化">首页优化</a></li>
    </ul>
  </li>
  <li><a href="#nginx优化" id="markdown-toc-nginx优化">Nginx优化</a>    <ul>
      <li><a href="#nginx配置优化" id="markdown-toc-nginx配置优化">Nginx配置优化</a></li>
      <li><a href="#tcpip-网络协议配置优化" id="markdown-toc-tcpip-网络协议配置优化">tcp/ip 网络协议配置优化</a></li>
      <li><a href="#linux系统优化" id="markdown-toc-linux系统优化">linux系统优化</a></li>
    </ul>
  </li>
  <li><a href="#php优化" id="markdown-toc-php优化">php优化</a>    <ul>
      <li><a href="#php7升级" id="markdown-toc-php7升级">php7升级？</a></li>
      <li><a href="#opcode缓存" id="markdown-toc-opcode缓存">opcode缓存</a></li>
      <li><a href="#代码伪编译" id="markdown-toc-代码伪编译">代码伪编译</a></li>
      <li><a href="#模板编译" id="markdown-toc-模板编译">模板编译</a></li>
      <li><a href="#xhprof" id="markdown-toc-xhprof">xhprof</a></li>
    </ul>
  </li>
  <li><a href="#业务优化" id="markdown-toc-业务优化">业务优化</a>    <ul>
      <li><a href="#扩展开放修改封闭" id="markdown-toc-扩展开放修改封闭">扩展开放、修改封闭</a></li>
      <li><a href="#异步缓存分布式" id="markdown-toc-异步缓存分布式">异步、缓存、分布式</a></li>
      <li><a href="#静态化" id="markdown-toc-静态化">静态化</a></li>
      <li><a href="#业务解耦" id="markdown-toc-业务解耦">业务解耦</a></li>
    </ul>
  </li>
  <li><a href="#mysql优化" id="markdown-toc-mysql优化">mysql优化</a>    <ul>
      <li><a href="#部署" id="markdown-toc-部署">部署</a></li>
      <li><a href="#开发" id="markdown-toc-开发">开发</a></li>
    </ul>
  </li>
  <li><a href="#缓存优化" id="markdown-toc-缓存优化">缓存优化</a>    <ul>
      <li><a href="#多级缓存" id="markdown-toc-多级缓存">多级缓存</a></li>
    </ul>
  </li>
  <li><a href="#服务器优化" id="markdown-toc-服务器优化">服务器优化</a>    <ul>
      <li><a href="#多进程" id="markdown-toc-多进程">多进程</a></li>
      <li><a href="#减少上下文切换" id="markdown-toc-减少上下文切换">减少上下文切换</a></li>
      <li><a href="#多路复用" id="markdown-toc-多路复用">多路复用</a></li>
      <li><a href="#减少系统调用" id="markdown-toc-减少系统调用">减少系统调用</a></li>
    </ul>
  </li>
</ul>
<hr />

<h1 id="原则">原则</h1>
<div class="highlighter-rouge"><pre class="highlight"><code>优化不可脱离业务
</code></pre>
</div>

<h1 id="前端优化">前端优化</h1>

<h3 id="减少http请求">减少http请求</h3>
<h3 id="浏览器缓存">浏览器缓存</h3>
<h3 id="cdn分布式存储前端资源">CDN分布式存储前端资源</h3>
<h3 id="多域名访问">多域名访问</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>原因一：浏览器对同一域名的并行请求数有上限，多个域名则支持更多并行请求
原因二：使用同一域名的时候无用的 cookie 简直是噩梦
</code></pre>
</div>

<h3 id="数据压缩">数据压缩</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>gzip压缩
资源编译压缩
</code></pre>
</div>

<h3 id="首页优化">首页优化</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>基础加载、后期渲染
</code></pre>
</div>

<h1 id="nginx优化">Nginx优化</h1>

<h3 id="nginx配置优化">Nginx配置优化</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>进程数
进程文件打开最大数
多路复用
gzip压缩
静态资源缓存（动态也支持）
开启长连接
</code></pre>
</div>

<h3 id="tcpip-网络协议配置优化">tcp/ip 网络协议配置优化</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>这边不太熟悉
</code></pre>
</div>

<h3 id="linux系统优化">linux系统优化</h3>

<h1 id="php优化">php优化</h1>

<h3 id="php7升级">php7升级？</h3>
<h3 id="opcode缓存">opcode缓存</h3>
<h3 id="代码伪编译">代码伪编译</h3>
<h3 id="模板编译">模板编译</h3>
<h3 id="xhprof">xhprof</h3>

<h1 id="业务优化">业务优化</h1>

<h3 id="扩展开放修改封闭">扩展开放、修改封闭</h3>
<h3 id="异步缓存分布式">异步、缓存、分布式</h3>
<h3 id="静态化">静态化</h3>
<h3 id="业务解耦">业务解耦</h3>

<h1 id="mysql优化">mysql优化</h1>

<h3 id="部署">部署</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>慢查询日志收集
nosql
并发数
连接时间
</code></pre>
</div>

<h3 id="开发">开发</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>innodb表引擎
主键索引
字段优化
explain应用
</code></pre>
</div>

<h1 id="缓存优化">缓存优化</h1>

<h3 id="多级缓存">多级缓存</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>请求内缓存
本地缓存
分布式缓存
</code></pre>
</div>

<p>#redis
    多实例化
    内存优化
    hash使用</p>

<h1 id="服务器优化">服务器优化</h1>

<h3 id="多进程">多进程</h3>
<h3 id="减少上下文切换">减少上下文切换</h3>
<h3 id="多路复用">多路复用</h3>
<h3 id="减少系统调用">减少系统调用</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>strace统计调用次数
</code></pre>
</div>

  </article>
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key=/php/2017/08/14/optimization-performance-with-php data-title=php与系统性能优化总结 data-url=博观而约取，厚积而薄发。//php/2017/08/14/optimization-performance-with-php.html></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"pawpaw"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
</div>

      </div>
    </div>
    
    <footer class="footer">
  <div id="gotop">^</div>
  <br>
	@2015 Pithy Theme by Pawpaw.<span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
</footer>

    
  </body>

</html>
